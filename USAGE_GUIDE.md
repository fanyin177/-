# 公司车辆管理系统使用指南

## 一、系统启动

### 环境要求

- Python 3.9 或更高版本
- 操作系统：Windows/Linux/MacOS

### 快速启动

1. 双击运行 `run.py` 脚本或在命令行中执行：
   ```bash
   python run.py
   ```

2. 首次运行时，系统会自动：
   - 创建虚拟环境并安装依赖
   - 初始化数据库
   - 提示您创建管理员账户
   - 导入默认的车辆类型和维护类型数据
   - 启动Web服务器并打开浏览器

### 手动启动流程

如果自动脚本不起作用，您可以按照以下步骤手动启动：

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt

# 迁移数据库
python manage.py migrate

# 创建管理员账户
python manage.py createsuperuser

# 导入初始数据
python manage.py loaddata initial_data.json

# 启动服务器
python manage.py runserver
```

## 二、系统功能说明

### 登录系统

1. 在浏览器中访问 http://127.0.0.1:8000/
2. 点击"登录系统"按钮
3. 使用已创建的管理员账户登录

### 用户管理

管理员可以在系统中创建和管理不同类型的用户：

- **管理员**：拥有系统的全部权限
- **员工**：可以预约车辆和查看数据
- **司机**：负责驾驶车辆
- **普通用户**：只能预约车辆

操作路径：`管理后台 -> 用户 -> 用户`

### 车辆管理

#### 添加车辆

1. 进入 `管理后台 -> 车辆 -> 车辆`
2. 点击"添加车辆"按钮
3. 填写车辆信息：
   - 基本信息：车牌号、类型、品牌、型号等
   - 车辆标识：车架号、发动机号
   - 购买信息：购买日期、价格
   - 使用信息：当前状态、里程数、油耗等
   - 重要日期：保险到期日、年检到期日

#### 上传车辆文档

可以为每辆车添加相关文档，如保险单、行驶证等：

1. 在车辆详情页面，滚动到"车辆文档"部分
2. 点击"添加车辆文档"
3. 选择文档类型并上传文件

### 预约管理

#### 创建预约

1. 进入 `管理后台 -> 预约 -> 车辆预约`
2. 点击"添加车辆预约"按钮
3. 填写预约信息：
   - 预约基本信息：用户、车辆、用途等
   - 行程信息：开始/结束时间、出发/目的地、乘客信息
   - 状态信息：优先级等

#### 审批预约

管理员可以批准或拒绝预约：

1. 在预约列表中选择待审批的预约
2. 使用"操作"下拉菜单中的"批准选中的预约申请"或"拒绝选中的预约申请"

#### 记录行程信息

预约完成后，可以记录实际行程信息：

1. 在预约详情页面，滚动到"行程记录"部分
2. 填写实际开始/结束时间、起始/结束里程、燃油消耗、各种费用等

### 维护管理

#### 添加维护记录

1. 进入 `管理后台 -> 维护 -> 维护记录`
2. 点击"添加维护记录"按钮
3. 填写维护信息：
   - 基本信息：车辆、维护类型、标题等
   - 日期信息：开始/结束日期
   - 费用信息：维护费用、里程数
   - 服务提供商信息：服务提供商、联系人、联系电话
   - 负责人信息：负责人、创建人

#### 添加维护项目

可以为每条维护记录添加具体的维护项目：

1. 在维护记录详情页面，滚动到"维护项目"部分
2. 点击"添加维护项目"
3. 填写项目名称、描述、费用等

## 三、常见问题解答

### 1. 忘记管理员密码怎么办？

可以使用以下命令重置管理员密码：

```bash
python manage.py changepassword <用户名>
```

### 2. 数据库损坏怎么恢复？

系统使用SQLite数据库，建议定期备份`db.sqlite3`文件。恢复时，只需替换该文件并重启系统。

### 3. 如何修改系统配置？

编辑项目根目录下的`.env`文件，修改相关配置参数，然后重启系统。

### 4. 如何将数据导出为Excel？

在管理后台的列表页面，使用右上角的"导出"功能选择导出格式。

## 四、联系支持

如有任何问题，请联系系统管理员或技术支持团队：

- 电子邮件：support@example.com
- 电话：400-123-4567 